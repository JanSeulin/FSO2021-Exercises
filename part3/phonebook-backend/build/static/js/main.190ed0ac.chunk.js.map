{"version":3,"sources":["components/Form.js","components/Display.js","components/Filter.js","services/persons.js","App.js","index.js"],"names":["Form","addName","newName","newNumber","handleName","handleNumber","onSubmit","value","onChange","required","type","Display","persons","searchValue","purge","filter","val","name","toLowerCase","includes","number","map","onClick","id","Filter","handle","placeholder","baseUrl","exportedRouters","getAll","axios","get","then","response","data","create","newObject","post","delete","update","put","Error","errorMessage","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","Confirmation","message","App","useState","setPersons","setNewName","setNewNumber","setSearchValue","setMessage","setErrorMessage","useEffect","personService","initialPersons","event","console","log","target","preventDefault","foundName","some","person","foundNumber","window","confirm","find","p","changedPerson","returnedPerson","setTimeout","catch","error","status","statusText","alert","personObject","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.190ed0ac.chunk.js","sourcesContent":["import React from 'react';\n\n\n\nconst Form = ({addName, newName, newNumber, handleName, handleNumber}) => { \n    return (\n      <form onSubmit={addName}>\n          <div>\n            Name\n            <br/><input value={newName} onChange={handleName} required/><br/><br/>\n            Number \n            <br/><input value={newNumber} onChange={handleNumber} required/><br/><br/>\n          </div>\n          <div>\n            <button type=\"submit\">Add</button>\n          </div>\n        </form>\n    )\n  }\n\nexport default Form;","import React from 'react';\n\nconst Display = ({ persons, searchValue, purge }) => {\n    return (\n    <ul>\n    {persons.filter((val) => {\n      if (searchValue === \"\") {\n        return val;\n      } else if (val.name.toLowerCase().includes(searchValue.toLowerCase())){\n        return val;\n      } else if (val.number.toLowerCase().includes(searchValue.toLowerCase())){\n        return val;\n      }\n    }).map((val) => {\n      return (\n        <>\n          <li key={val.id}>\n            {val.name} - {val.number} &ensp;\n            <button onClick={() => purge(val.id)}>\n              Delete\n            </button>\n          </li>\n        </>\n      )\n    })\n  }\n    </ul>\n  )}\n\n\nexport default Display;","import React from 'react';\n\nconst Filter = ({ searchValue, handle }) => {\n    return (\n      <div>\n      Filter: <input value={searchValue} onChange={handle} placeholder=\"Search...\" />\n      </div>\n    )\n}\n\nexport default Filter;","import axios from 'axios';\nconst baseUrl = '/api/people'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data);\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data);\n}\n\nconst purge = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then();\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then(response => response.data);\n}\n\nconst exportedRouters = {\n    getAll, \n    create,\n    purge,\n    update,\n}\n\nexport default exportedRouters; ","import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport Form from './components/Form';\nimport Display from './components/Display';\nimport Filter from './components/Filter';\nimport personService from './services/persons'\n// import axios from 'axios'\n\nconst Error = ({ errorMessage }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgray',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  if (errorMessage === null) {\n    return null\n  }\n\n  return (\n    <div style={errorStyle}>\n      {errorMessage}\n    </div>\n  )\n}\n\nconst Confirmation = ({ message }) => {\n\n  const confirmationStyle = {\n    color: 'green',\n    background: 'lightgray',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={confirmationStyle}>\n      {message}\n    </div>\n  )\n}\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [newName,  setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchValue, setSearchValue] = useState('');\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, []);\n\n\n  const handleNameChange = (event) => {\n    console.log(`Name: ${event.target.value}`);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    console.log(`Number: ${event.target.value}`);\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchValue = (event) => {\n    console.log(`Filter: ${event.target.value}`);\n    setSearchValue(event.target.value);\n  }\n\n  const purge = (id) => {\n    personService\n      .purge(id).then(\n        setPersons(persons.filter(p => p.id !== id))\n      )\n  }\n\n  const addName = (event) => {\n    event.preventDefault();\n    const foundName = persons.some(person => person.name === newName)\n    const foundNumber = persons.some(person => person.number === newNumber);\n\n    if (foundName) {\n      const option = window.confirm(\n        `${newName} is already in the phonebook, replace the old number with a new one?`)\n      \n      if (option) {\n        const person = persons.find(p => p.name === newName);\n        console.log(person)\n        const changedPerson = {...person, number: newNumber}\n        console.log(changedPerson)\n\n        personService\n          .update(changedPerson.id, changedPerson).then(returnedPerson => {\n            setPersons(\n              persons.map(person => person.id !== changedPerson.id\n                              ? person : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n\n            setMessage(\n              `${changedPerson.name}'s number updated to ${changedPerson.number}.`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            if (error.response.status === 400 && error.response.statusText === \"Bad Request\") {\n              setErrorMessage(`Number must be at least 8 characters long.`)\n            } else {\n              setErrorMessage(\n                `Person ${changedPerson.name} has already been removed from the server.`\n              )\n            }\n            //console.log(error.response.data)\n            //console.log(error.response.status)\n            //console.log(error.response.data.error)\n            \n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } \n    else if (foundNumber) {\n      alert(`The number ${newNumber} is already in the phonebook.`)\n    }\n    else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }  \n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n\n          setMessage(\n            `'${returnedPerson.name}' was added to the phonebook`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          setErrorMessage(`${error.response.data.error}`)\n          \n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 7000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Confirmation message={message} />\n      <Error errorMessage={errorMessage} />\n      <Filter searchValue={searchValue} handle={handleSearchValue} />\n      <h2>Add New</h2>\n      <Form addName={addName} newName={newName} newNumber={newNumber} \n          handleName={handleNameChange} handleNumber={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Display persons={persons} searchValue={searchValue} purge={purge}/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}