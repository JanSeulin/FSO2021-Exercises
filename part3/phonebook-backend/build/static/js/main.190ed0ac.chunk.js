(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),a=n.n(c),o=(n(20),n(6)),u=n(3),s=(n(21),n(0)),i=function(e){var t=e.addName,n=e.newName,r=e.newNumber,c=e.handleName,a=e.handleNumber;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["Name",Object(s.jsx)("br",{}),Object(s.jsx)("input",{value:n,onChange:c,required:!0}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"Number",Object(s.jsx)("br",{}),Object(s.jsx)("input",{value:r,onChange:a,required:!0}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})},l=function(e){var t=e.persons,n=e.searchValue,r=e.purge;return Object(s.jsx)("ul",{children:t.filter((function(e){return""===n||e.name.toLowerCase().includes(n.toLowerCase())||e.number.toLowerCase().includes(n.toLowerCase())?e:void 0})).map((function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("li",{children:[e.name," - ",e.number," \u2002",Object(s.jsx)("button",{onClick:function(){return r(e.id)},children:"Delete"})]},e.id)})}))})},b=function(e){var t=e.searchValue,n=e.handle;return Object(s.jsxs)("div",{children:["Filter: ",Object(s.jsx)("input",{value:t,onChange:n,placeholder:"Search..."})]})},d=n(4),j=n.n(d),h="/api/people",m={getAll:function(){return j.a.get(h).then((function(e){return e.data}))},create:function(e){return j.a.post(h,e).then((function(e){return e.data}))},purge:function(e){return j.a.delete("".concat(h,"/").concat(e)).then()},update:function(e,t){return j.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},f=function(e){var t=e.errorMessage;return null===t?null:Object(s.jsx)("div",{style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},O=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{style:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})};var g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),d=Object(u.a)(a,2),j=d[0],h=d[1],g=Object(r.useState)(""),p=Object(u.a)(g,2),v=p[0],x=p[1],N=Object(r.useState)(""),w=Object(u.a)(N,2),S=w[0],k=w[1],y=Object(r.useState)(null),C=Object(u.a)(y,2),T=C[0],A=C[1],B=Object(r.useState)(null),L=Object(u.a)(B,2),V=L[0],q=L[1];return Object(r.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{message:T}),Object(s.jsx)(f,{errorMessage:V}),Object(s.jsx)(b,{searchValue:S,handle:function(e){console.log("Filter: ".concat(e.target.value)),k(e.target.value)}}),Object(s.jsx)("h2",{children:"Add New"}),Object(s.jsx)(i,{addName:function(e){e.preventDefault();var t=n.some((function(e){return e.name===j})),r=n.some((function(e){return e.number===v}));if(t){if(window.confirm("".concat(j," is already in the phonebook, replace the old number with a new one?"))){var a=n.find((function(e){return e.name===j}));console.log(a);var u=Object(o.a)(Object(o.a)({},a),{},{number:v});console.log(u),m.update(u.id,u).then((function(e){c(n.map((function(t){return t.id!==u.id?t:e}))),h(""),x(""),A("".concat(u.name,"'s number updated to ").concat(u.number,".")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){400===e.response.status&&"Bad Request"===e.response.statusText?q("Number must be at least 8 characters long."):q("Person ".concat(u.name," has already been removed from the server.")),setTimeout((function(){q(null)}),5e3)}))}}else if(r)alert("The number ".concat(v," is already in the phonebook."));else{var s={name:j,number:v};m.create(s).then((function(e){c(n.concat(e)),h(""),x(""),A("'".concat(e.name,"' was added to the phonebook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){console.log(e.response.data),q("".concat(e.response.data.error)),setTimeout((function(){q(null)}),7e3)}))}},newName:j,newNumber:v,handleName:function(e){console.log("Name: ".concat(e.target.value)),h(e.target.value)},handleNumber:function(e){console.log("Number: ".concat(e.target.value)),x(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(l,{persons:n,searchValue:S,purge:function(e){m.purge(e).then(c(n.filter((function(t){return t.id!==e}))))}})]})};a.a.render(Object(s.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.190ed0ac.chunk.js.map